# 数组

数组是一种包含了若干变量的数据结构，这些变量可以通过计算出来的索引来访问。数组所包含的变量也被称为数组的元素（elements），它们的类型是相同的，而这一类型被称为数组的元素类型（element type）。

每个数组都拥有一个等级（rank），数组的等级决定了有多少个索引与每个数组元素相关联。数组的等级也被称为数组的维度（dimensions）。等级为一的数组被称为**单维数组**（single-dimensional array，即一维数组）。如果一个数组的等级大于一，那么就称为**多维数组**（multi-dimensional array）。具有特定等级的多维数组也经常被称为“二维数组”、“三维数组”等等。

数组的每个维度都有一个与之关联的长度（length），此长度是一个大于等于零的整数。数组维度的长度并非数组类型的组成部分，这个值会在运行时、数组实例被创建的时候被设定（established）。数组维度的长度决定了此维度上索引的合法取值范围：假设一个维度的长度是`N`，那么索引的取值范围就是从`0`到`N - 1`(包含`0`和`N - 1`)。数组的元素总个数是数组所有维度长度的乘积。如果数组的一个或多个维度长度为零，那么这个数组就是一个空数组。

数组的元素类型可以是任意的——包括数组类型（译注：即一个数组的元素可以是子数组）。

## 数组类型

数组类型被书写为*非数组类型*后面跟上一个或者多个*级别指定符*：

```antlr
array_type
    : non_array_type rank_specifier+
    ;

non_array_type
    : type
    ;

rank_specifier
    : '[' dim_separator* ']'
    ;

dim_separator
    : ','
    ;
```

*non_array_type*指的是除*array_type*之外的任意*type*，即这个类型自身不能是一个数组类型。

数组类型的级别由*array_type*中最左边的*rank_specifier*所指定：这个*rank_specifier*指定了这个数组的级别是其所包含的`,`的数量加一。（译注：`int[,]`和`int[,][]`都是二维数组。）

数组元素的类型是数组类型删除了最左边的*rank_specifier*后所得到的类型：

* `T[R]`所表示的是一个级别为`R`、元素类型为`T`（非数组类型）的数组类型（译注：`R`可以是诸如`10`或`10,20`的值）。
* `T[R][R1]...[Rn]`所表示的是级别为`R`、元素类型为`T[R1]...[Rn]`的数组类型。

实际上，在最终的非数组元素类型之前的*rank_specifier*是从左向右读取的（???）。类型`int[][,,][,]`是一个一维数组，这个数组的元素是一个三维数组，而这个三维数组的元素又是一个二维数组，这个二维数组的元素类型是`int`。

在运行时，数组类型的值可以是`null`或者是此数组类型实例的一个引用（译注：因为数组的本质是类）。